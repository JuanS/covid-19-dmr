(this["webpackJsonpcovid-19-dmr"]=this["webpackJsonpcovid-19-dmr"]||[]).push([[0],{233:function(e,t,a){e.exports=a(387)},238:function(e,t,a){},239:function(e,t,a){},387:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(188),i=a.n(o),c=(a(238),a(14)),s=a(47),l={days:4,evolutionDays:15,data:void 0,countries:[],country:void 0,isBetter:!0,isLoading:!0},d=function(e,t){switch(t.type){case"set_is_loading":return Object(s.a)({},e,{isLoading:t.payload});case"set_data":return Object(s.a)({},e,{data:t.payload});case"set_countries":return Object(s.a)({},e,{countries:t.payload});case"set_country":return Object(s.a)({},e,{country:t.payload});case"set_is_better":return Object(s.a)({},e,{isBetter:t.payload});default:return e}},u=r.a.createContext(l);function m(e){var t=e.children,a=Object(n.useReducer)(d,l),o=Object(c.a)(a,2),i=o[0],s=o[1];return r.a.createElement(u.Provider,{value:{state:i,dispatch:s}},t)}a(239);var p=a(127),y=a(189),v=function(){var e=Object(n.useContext)(u).dispatch,t=Object(n.useCallback)((function(){var t=new XMLHttpRequest;t.addEventListener("load",(function(){var a=JSON.parse(t.responseText),n=Object.keys(a),r=y.parse(window.location.search),o=r.country?r.country:"Spain";n.includes(o)||(o="Spain"),e({type:"set_countries",payload:Object.keys(a)}),e({type:"set_data",payload:a}),e({type:"set_country",payload:o}),e({type:"set_is_loading",payload:!1})})),t.open("GET","https://pomber.github.io/covid19/timeseries.json"),t.send()}),[e]);return Object(n.useEffect)((function(){t()}),[t]),r.a.createElement("div",{className:"Current-container"},r.a.createElement("span",{className:"Loading"},"Loading ..."))},f=function(e,t,a){var n=-1;if(e.length>=a){var r=e[t-a];n=e[t-1].deaths/r.deaths}return n},b=a(190),h=function(){var e=Object(n.useContext)(u).state,t=function(){var t=[];if(e.data&&e.country)for(var a=e.data[e.country],n=a.length,r=n,o=n-e.evolutionDays+1;o<=r;o+=1){var i=f(a,o,e.days);t.push({date:"".concat(o),fine:1,extra:i-1})}return t}();return r.a.createElement("div",{className:"Evolution-container"},t.length&&r.a.createElement(b.a,{data:t,keys:["fine","extra"],indexBy:"date",margin:{top:0,right:0,bottom:0,left:0},padding:.3,colors:{scheme:"pastel2"},enableLabel:!1,enableGridY:!1,isInteractive:!1,borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:1,tickPadding:5,tickRotation:0,legend:"last days",legendPosition:"middle",legendOffset:32},axisLeft:null,labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},animate:!0,motionStiffness:90,motionDamping:15}))},E=function(){var e=Object(n.useContext)(u).state,t=function(){var t=-1;if(e.data&&e.country){var a=e.data[e.country];t=f(a,a.length,e.days)}return t}();return r.a.createElement("div",{className:"Current-container"},isFinite(t)&&r.a.createElement("div",{className:"Title"},"Covid-19 death multiplication rate*",r.a.createElement("br",null),"every 4 days at"," ",e.country," ","today is"),!isFinite(t)&&r.a.createElement("div",{className:"Title"},"There is not enough data to calculate",r.a.createElement("br",null),"the Covid-19 death multiplication rate*",r.a.createElement("br",null),"every 4 days for"," ",e.country),r.a.createElement("br",null),r.a.createElement("span",{className:"Current-number"},isFinite(t)&&t.toFixed(2)),!e.isLoading&&r.a.createElement(h,null))},g=a(199),O=a.n(g),j=function(e){e.data_orig;return r.a.createElement("div",{className:"Today-container Corner-Top-Right"},r.a.createElement(O.a,{className:"Today-date",format:"dddd, D MMMM"},Date.now()))},N=a(128),C=function(){var e=Object(n.useContext)(u),t=e.state,a=e.dispatch,o=Object(n.useState)(0),i=Object(c.a)(o,2),s=i[0],l=i[1],d=Object(n.useState)(!0),m=Object(c.a)(d,2),p=m[0],y=m[1],v=Object(n.useState)(!0),b=Object(c.a)(v,2),h=b[0],E=b[1],g=Object(n.useCallback)((function(){if(t.data&&t.country){var e=t.data[t.country],a=f(e,e.length,t.days),n=f(e,e.length-1,t.days);l(a-n),E(!isNaN(a)&&!isNaN(n))}}),[t.country,t.data,t.days]);return Object(n.useEffect)((function(){g(),y(s<=0),a({type:"set_is_better",payload:p})}),[g,p,y,s,a]),r.a.createElement("div",{className:"Delta-container Corner-Top-Right"},h&&r.a.createElement("div",null,p&&r.a.createElement(N.a,{className:"Delta-icon"}),!p&&r.a.createElement(N.b,{className:"Delta-icon"}),r.a.createElement("span",{className:"Delta-percentage"},Math.abs(s.toFixed(2))),r.a.createElement("span",{className:"Delta-legend"}," ",p?"less":"more"," ","than yesterday")))},x=function(e){var t=Object(n.useContext)(u),a=t.state,o=t.dispatch,i=a.countries.map((function(e){return r.a.createElement("option",{key:e,className:"select-item"},e)}));return r.a.createElement("div",{className:"Countries-container Corner-Top-Left"},!a.isLoading&&r.a.createElement("div",{className:"select"},r.a.createElement("select",{value:a.country,onChange:function(e){o({type:"set_country",payload:e.target.value})}},i)))},k=function(){var e=Object(n.useContext)(u).state;return Object(n.useEffect)((function(){p.a.initialize("UA-131741741-2"),p.a.pageview("/")}),[]),r.a.createElement("div",{className:e.isBetter?"isBetter":"isNotBetter"},r.a.createElement(x,null),r.a.createElement(j,null),e.isLoading&&r.a.createElement(v,null),!e.isLoading&&r.a.createElement(C,null),!e.isLoading&&r.a.createElement(E,null),r.a.createElement("span",{className:"Legend-Container Corner-Bottom-Left"},"*Covid-19 will stop spreading when the rate reaches 1.0"))};var w=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(m,null,r.a.createElement(k,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[233,1,2]]]);
//# sourceMappingURL=main.dcace382.chunk.js.map